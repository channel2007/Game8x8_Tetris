/*****************************************************************************
*  8x8繪圖函數.
*
*  created  by channel
*
*  todo list:
*
*  note:
****************************************************************************/

#include "Game8x8Graphics.h"

//---------------------------------------------------------------------------
// 建構式.
//---------------------------------------------------------------------------
Game8x8Graphics::Game8x8Graphics() {
	// 建立MAX7219函數庫.
	lc = new LedControl( 12, 11, 10, 1);
	// 矩陣LED相關.
	lc->shutdown(0, false);
	// 設定LED亮度.
	lc->setIntensity(0, 0);
	// 清除顯示.
	//lc->clearDisplay(0);  
}

//---------------------------------------------------------------------------
// 更新.
//---------------------------------------------------------------------------
void Game8x8Graphics::update() {

	// 更新畫面.
	for (int x = 0; x<8; x++) {
		for (int y = 0; y<8; y++) {
			if (canvas[x][y] == 1) {
				lc->setLed(0, x, y, true);
			}
			else {
				lc->setLed(0, x, y, false);
			}
		}
	}

}

//---------------------------------------------------------------------------
// 清除.
//  state:
//   0:全黑.
//   1:全亮.
//---------------------------------------------------------------------------
void Game8x8Graphics::clearDisplay(byte state) {
	for (int x = 0; x<8; x++) {
		for (int y = 0; y<8; y++) {
			canvas[x][y] = state;
		}
	}
}

//---------------------------------------------------------------------------
// 設定像素..
//  row:x.
//  col:y.
//  state:
//   0:全黑.
//   1:全亮.
//---------------------------------------------------------------------------
void Game8x8Graphics::setPixcls(int x, int y, byte state) {
	if (x>7) { x = 7; }if (x<0) { x = 0; }
	if (y>7) { y = 7; }if (y<0) { y = 0; }
	canvas[y][x] = state;
}


